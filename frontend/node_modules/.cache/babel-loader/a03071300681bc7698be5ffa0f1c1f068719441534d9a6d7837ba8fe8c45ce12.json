{"ast":null,"code":"import axios from 'axios';\nclass AuthenticationService {\n  executeBasicAuthenticationService(username, password) {\n    return axios.get('http://localhost:8080/basicauth', {\n      headers: {\n        authorization: this.createBasicAuthToken(username, password)\n      }\n    });\n  }\n  executeJwtAuthenticationService(username, password) {\n    return axios.post('http://localhost:8080/authenticate', {\n      username,\n      password\n    });\n  }\n  createBasicAuthToken(username, password) {\n    return 'Basic ' + window.btoa(username + \":\" + password); //baisc 64 encoding\n  }\n\n  registerSuccessfulLogin(username, password) {\n    //let basicAuthHeader = 'Basic ' + window.btoa(username + \":\" + password); //baisc 64 encoding\n    //console.log('registerSuccessfulLogin')\n    sessionStorage.setItem('authenticatedUser', username);\n    this.setupAxiosInterceptors(this.createBasicAuthToken(username, password));\n  }\n  registerSuccessfulLoginForJwt(username, token) {\n    sessionStorage.setItem('authenticatedUser', username);\n    this.setupAxiosInterceptors(this.createJWTToken(token));\n  }\n  createJWTToken(token) {\n    return 'Bearer ' + token;\n  }\n  logout() {\n    sessionStorage.removeItem('authenticatedUser');\n  }\n  isUserLoggedIn() {\n    let user = sessionStorage.getItem('authenticatedUser');\n    if (user === null) return false;\n    return true;\n  }\n  getLoggedInUserName() {\n    let user = sessionStorage.getItem('authenticatedUser');\n    if (user === null) return '';\n    return user;\n  }\n  setupAxiosInterceptors(basicAuthHeader) {\n    //{Authorization: basicAuthHeaderString}\n    axios.interceptors.request.use(config => {\n      if (this.isUserLoggedIn()) {\n        config.headers.authorization = basicAuthHeader;\n      }\n      return config;\n    });\n  }\n}\nexport default new AuthenticationService();","map":{"version":3,"names":["axios","AuthenticationService","executeBasicAuthenticationService","username","password","get","headers","authorization","createBasicAuthToken","executeJwtAuthenticationService","post","window","btoa","registerSuccessfulLogin","sessionStorage","setItem","setupAxiosInterceptors","registerSuccessfulLoginForJwt","token","createJWTToken","logout","removeItem","isUserLoggedIn","user","getItem","getLoggedInUserName","basicAuthHeader","interceptors","request","use","config"],"sources":["/Users/liwenwen/Desktop/MS/project/todoapp/todo-app/src/components/todo/AuthenticationService.js"],"sourcesContent":["import axios from 'axios'\n\nclass AuthenticationService{\n\n    executeBasicAuthenticationService(username, password) {\n        return axios.get('http://localhost:8080/basicauth', \n        {headers: {authorization:this.createBasicAuthToken(username, password)}})\n    }\n    executeJwtAuthenticationService(username, password) {\n        return axios.post('http://localhost:8080/authenticate', {\n            username, \n            password\n        })\n    }\n\n    createBasicAuthToken(username, password){\n        return 'Basic ' + window.btoa(username + \":\" + password); //baisc 64 encoding\n    }\n    registerSuccessfulLogin(username, password){\n        //let basicAuthHeader = 'Basic ' + window.btoa(username + \":\" + password); //baisc 64 encoding\n        //console.log('registerSuccessfulLogin')\n        sessionStorage.setItem('authenticatedUser', username);\n        this.setupAxiosInterceptors(this.createBasicAuthToken(username, password))\n    }\n\n    registerSuccessfulLoginForJwt(username, token) {\n        sessionStorage.setItem('authenticatedUser', username)\n        this.setupAxiosInterceptors(this.createJWTToken(token))\n    }\n\n    createJWTToken(token){\n        return 'Bearer ' +  token\n    }\n\n    logout(){\n        sessionStorage.removeItem('authenticatedUser');\n    }\n    isUserLoggedIn(){\n        let user = sessionStorage.getItem('authenticatedUser')\n        if(user === null) return false\n        return true\n    }\n    getLoggedInUserName(){\n        let user = sessionStorage.getItem('authenticatedUser')\n        if(user === null) return ''\n        return user\n    }\n    setupAxiosInterceptors(basicAuthHeader) {\n        //{Authorization: basicAuthHeaderString}\n        axios.interceptors.request.use(\n            (config) => {\n                if(this.isUserLoggedIn()) {\n                    config.headers.authorization = basicAuthHeader\n                }\n                return config\n            }\n        )\n    }\n}\n\nexport default new AuthenticationService()"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,qBAAqB;EAEvBC,iCAAiCA,CAACC,QAAQ,EAAEC,QAAQ,EAAE;IAClD,OAAOJ,KAAK,CAACK,GAAG,CAAC,iCAAiC,EAClD;MAACC,OAAO,EAAE;QAACC,aAAa,EAAC,IAAI,CAACC,oBAAoB,CAACL,QAAQ,EAAEC,QAAQ;MAAC;IAAC,CAAC,CAAC;EAC7E;EACAK,+BAA+BA,CAACN,QAAQ,EAAEC,QAAQ,EAAE;IAChD,OAAOJ,KAAK,CAACU,IAAI,CAAC,oCAAoC,EAAE;MACpDP,QAAQ;MACRC;IACJ,CAAC,CAAC;EACN;EAEAI,oBAAoBA,CAACL,QAAQ,EAAEC,QAAQ,EAAC;IACpC,OAAO,QAAQ,GAAGO,MAAM,CAACC,IAAI,CAACT,QAAQ,GAAG,GAAG,GAAGC,QAAQ,CAAC,CAAC,CAAC;EAC9D;;EACAS,uBAAuBA,CAACV,QAAQ,EAAEC,QAAQ,EAAC;IACvC;IACA;IACAU,cAAc,CAACC,OAAO,CAAC,mBAAmB,EAAEZ,QAAQ,CAAC;IACrD,IAAI,CAACa,sBAAsB,CAAC,IAAI,CAACR,oBAAoB,CAACL,QAAQ,EAAEC,QAAQ,CAAC,CAAC;EAC9E;EAEAa,6BAA6BA,CAACd,QAAQ,EAAEe,KAAK,EAAE;IAC3CJ,cAAc,CAACC,OAAO,CAAC,mBAAmB,EAAEZ,QAAQ,CAAC;IACrD,IAAI,CAACa,sBAAsB,CAAC,IAAI,CAACG,cAAc,CAACD,KAAK,CAAC,CAAC;EAC3D;EAEAC,cAAcA,CAACD,KAAK,EAAC;IACjB,OAAO,SAAS,GAAIA,KAAK;EAC7B;EAEAE,MAAMA,CAAA,EAAE;IACJN,cAAc,CAACO,UAAU,CAAC,mBAAmB,CAAC;EAClD;EACAC,cAAcA,CAAA,EAAE;IACZ,IAAIC,IAAI,GAAGT,cAAc,CAACU,OAAO,CAAC,mBAAmB,CAAC;IACtD,IAAGD,IAAI,KAAK,IAAI,EAAE,OAAO,KAAK;IAC9B,OAAO,IAAI;EACf;EACAE,mBAAmBA,CAAA,EAAE;IACjB,IAAIF,IAAI,GAAGT,cAAc,CAACU,OAAO,CAAC,mBAAmB,CAAC;IACtD,IAAGD,IAAI,KAAK,IAAI,EAAE,OAAO,EAAE;IAC3B,OAAOA,IAAI;EACf;EACAP,sBAAsBA,CAACU,eAAe,EAAE;IACpC;IACA1B,KAAK,CAAC2B,YAAY,CAACC,OAAO,CAACC,GAAG,CACzBC,MAAM,IAAK;MACR,IAAG,IAAI,CAACR,cAAc,CAAC,CAAC,EAAE;QACtBQ,MAAM,CAACxB,OAAO,CAACC,aAAa,GAAGmB,eAAe;MAClD;MACA,OAAOI,MAAM;IACjB,CACJ,CAAC;EACL;AACJ;AAEA,eAAe,IAAI7B,qBAAqB,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}